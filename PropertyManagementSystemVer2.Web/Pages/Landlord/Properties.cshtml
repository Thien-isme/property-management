@page
@model PropertyManagementSystemVer2.Web.Pages.Landlord.PropertiesModel
@{
    ViewData["Title"] = "Qu·∫£n l√Ω B·∫•t ƒë·ªông s·∫£n";
}

<div class="mb-20" style="display: flex; align-items: center; justify-content: space-between;">
    <div>
        <div class="page-title">B·∫•t ƒë·ªông s·∫£n c·ªßa b·∫°n</div>
        <div class="page-desc">Qu·∫£n l√Ω c√°c ph√≤ng tr·ªç/cƒÉn h·ªô b·∫°n ƒëang cho thu√™</div>
    </div>
    <button class="btn btn-primary" onclick="alert('T√≠nh nƒÉng th√™m m·ªõi (Form modal) s·∫Ω ch·∫°y ·ªü ƒë√¢y!')">
        <i data-feather="plus" style="width: 16px; height: 16px;"></i> Th√™m BDS m·ªõi
    </button>
</div>

<div class="filter-bar mb-20">
    <div class="header-search" style="flex: 1; min-width: 250px;">
        <i data-feather="search" style="color: var(--text-muted); width: 14px;"></i>
        <input placeholder="T√¨m ki·∫øm t√™n, ƒë·ªãa ch·ªâ..." style="width: 100%;" />
    </div>
    <button class="btn btn-primary btn-sm">T·∫•t c·∫£ (@Model.Properties.Count)</button>
    <button class="btn btn-ghost btn-sm">C√≤n tr·ªëng (@Model.Properties.Count(p => p.Status.ToString() == "Available"))</button>
    <button class="btn btn-ghost btn-sm">ƒê√£ thu√™ (@Model.Properties.Count(p => p.Status.ToString() == "Rented"))</button>
    <button class="btn btn-ghost btn-sm">Ch·ªù duy·ªát (@Model.Properties.Count(p => p.Status.ToString() == "PendingApproval"))</button>
</div>

<div class="property-grid">
    @if (Model.Properties != null && Model.Properties.Any())
    {
        foreach (var prop in Model.Properties)
        {
            <div class="property-card" style="position: relative;">
                @if (!string.IsNullOrEmpty(prop.ThumbnailUrl))
                {
                    <img class="property-image" src="@prop.ThumbnailUrl" alt="@prop.Title" />
                }
                else
                {
                    <div class="property-image-placeholder">üè†</div>
                }
                <div class="property-body">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
                        <span class="property-type-badge">@prop.PropertyType</span>
                        @if (prop.Status.ToString() == "Available")
                        {
                            <span class="badge badge-success">C√≤n tr·ªëng</span>
                        }
                        else if (prop.Status.ToString() == "PendingApproval")
                        {
                            <span class="badge badge-warning">Ch·ªù duy·ªát</span>
                        }
                        else if (prop.Status.ToString() == "Rented")
                        {
                            <span class="badge badge-info">ƒê√£ thu√™</span>
                        }
                        else
                        {
                            <span class="badge badge-gray">@prop.Status</span>
                        }
                    </div>
                    <div class="property-title">@prop.Title</div>
                    <div class="property-address"><i data-feather="map-pin" style="width: 12px; height: 12px;"></i> @prop.City</div>
                    
                    <div class="property-specs">
                        <span class="spec-item"><i data-feather="grid" style="width: 13px; height: 13px;"></i> ID: @prop.Id</span>
                    </div>

                    <div style="border-top: 1px solid var(--border); padding-top: 12px; display: flex; align-items: center; justify-content: space-between;">
                        <div>
                            <div class="property-price">@prop.MonthlyRent.ToString("N0") VNƒê</div>
                            <div class="property-price-sub">/th√°ng</div>
                        </div>
                        <div style="display: flex; gap: 6px;">
                            <button class="btn btn-secondary btn-sm btn-icon" title="Ch·ªânh s·ª≠a"><i data-feather="edit-2" style="width: 14px; height: 14px;"></i></button>
                            <button class="btn btn-primary btn-sm btn-icon" title="H√¨nh ·∫£nh"><i data-feather="image" style="width: 14px; height: 14px;"></i></button>
                        </div>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="empty-state" style="grid-column: 1 / -1;">
            <div class="empty-icon">üè†</div>
            <p>B·∫°n ch∆∞a c√≥ b·∫•t ƒë·ªông s·∫£n n√†o. B·∫•m "Th√™m BDS m·ªõi" ƒë·ªÉ b·∫Øt ƒë·∫ßu.</p>
        </div>
    }
</div>
