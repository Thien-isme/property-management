@page
@model PropertyManagementSystemVer2.Web.Pages.Admin.PropertiesModel
@{
    ViewData["Title"] = "Qu·∫£n l√Ω B·∫•t ƒë·ªông s·∫£n";
}

<div class="mb-20">
    <div class="page-title">Qu·∫£n l√Ω B·∫•t ƒë·ªông s·∫£n</div>
    <div class="page-desc">Duy·ªát v√† qu·∫£n l√Ω t·∫•t c·∫£ b·∫•t ƒë·ªông s·∫£n trong h·ªá th·ªëng</div>
</div>

<div class="card mb-20">
    <div class="filter-bar" style="margin-bottom: 0;">
        <div class="header-search" style="flex: 1; min-width: 200px;">
            <i data-feather="search" style="color: var(--text-muted); width: 14px;"></i>
            <input placeholder="T√¨m ki·∫øm t√™n BDS, ch·ªß nh√†, ƒë·ªãa ch·ªâ..." style="width: 100%;" />
        </div>
        <button class="btn btn-primary btn-sm">T·∫•t c·∫£</button>
        <button class="btn btn-ghost btn-sm">C√≤n tr·ªëng</button>
        <button class="btn btn-ghost btn-sm">ƒê√£ thu√™</button>
        <button class="btn btn-ghost btn-sm text-yellow" style="border-color: var(--warning);">Ch·ªù duy·ªát</button>
        <button class="btn btn-ghost btn-sm">Nh√°p</button>
        <button class="btn btn-ghost btn-sm text-red" style="border-color: var(--danger);">T·ª´ ch·ªëi</button>
    </div>
</div>

<div class="card">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>T√™n BDS</th>
                    <th>Lo·∫°i</th>
                    <th>Ch·ªß nh√†</th>
                    <th>Tr·∫°ng th√°i</th>
                    <th>Ti·ªÅn thu√™</th>
                    <th>H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody>
                @if (Model.Properties != null && Model.Properties.Any())
                {
                    foreach (var prop in Model.Properties)
                    {
                        <tr>
                            <td>#@prop.Id</td>
                            <td>
                                <div style="display: flex; gap: 12px; align-items: center; max-width: 300px;">
                                    @if (!string.IsNullOrEmpty(prop.ThumbnailUrl))
                                    {
                                        <img src="@prop.ThumbnailUrl" alt="@prop.Title" style="width: 40px; height: 40px; border-radius: 8px; object-fit: cover;" />
                                    }
                                    else
                                    {
                                        <div style="width: 40px; height: 40px; border-radius: 8px; background: var(--bg-input); display: flex; align-items: center; justify-content: center; font-size: 16px;">üè†</div>
                                    }
                                    <div style="flex: 1; min-width: 0;">
                                        <div class="fw-700" style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" title="@prop.Title">@prop.Title</div>
                                        <div style="font-size: 11px; color: var(--text-muted); margin-top: 2px;">@prop.City</div>
                                    </div>
                                </div>
                            </td>
                            <td><span class="badge badge-purple">@prop.PropertyType</span></td>
                            <td>@prop.Landlord?.FullName</td>
                            <td>
                                @if (prop.Status.ToString() == "Available")
                                {
                                    <span class="badge badge-success">C√≤n tr·ªëng</span>
                                }
                                else if (prop.Status.ToString() == "PendingApproval")
                                {
                                    <span class="badge badge-warning">Ch·ªù duy·ªát</span>
                                }
                                else if (prop.Status.ToString() == "Rented")
                                {
                                    <span class="badge badge-info">ƒê√£ thu√™</span>
                                }
                                else
                                {
                                    <span class="badge badge-gray">@prop.Status</span>
                                }
                            </td>
                            <td class="text-green fw-600">@prop.MonthlyRent.ToString("N0") ƒë</td>
                            <td>
                                <div style="display: flex; gap: 6px;">
                                    <button class="btn btn-ghost btn-sm btn-icon" title="Xem chi ti·∫øt"><i data-feather="eye" style="width: 14px; height: 14px;"></i></button>
                                    @if (prop.Status.ToString() == "PendingApproval")
                                    {
                                        <button class="btn btn-success btn-sm btn-icon" title="Duy·ªát"><i data-feather="check" style="width: 14px; height: 14px;"></i></button>
                                        <button class="btn btn-danger btn-sm btn-icon" title="T·ª´ ch·ªëi"><i data-feather="x" style="width: 14px; height: 14px;"></i></button>
                                    }
                                    else if (prop.Status.ToString() == "Available" || prop.Status.ToString() == "Rented")
                                    {
                                        <button class="btn btn-danger btn-sm btn-icon" title="G·ª° ƒëƒÉng"><i data-feather="eye-off" style="width: 14px; height: 14px;"></i></button>
                                    }
                                </div>
                            </td>
                        </tr>
                    }
                }
                else
                {
                    <tr>
                        <td colspan="7">
                            <div class="empty-state">
                                <div class="empty-icon">üè¢</div>
                                <p>Ch∆∞a c√≥ d·ªØ li·ªáu b·∫•t ƒë·ªông s·∫£n trong h·ªá th·ªëng.</p>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
